<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOG IN</title>
    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-edu-meeting.css">
    <link rel="stylesheet" href="assets/css/owl.css">
    <link rel="stylesheet" href="assets/css/lightbox.css">
    <link rel="stylesheet" href="assets/css/validation.css">

</head>

<body>
    <section class="contact-us" id="contact">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 align-self-center">
                    <div class="row justify-content-center">
                        <div class="col-lg-8 align-self-center">
                            <form id="contact" action="" method="post" class="login">
                                <div class="row justify-content-center">
                                    <div class="col-lg-12 align-self-center">
                                        <h2>LOG IN</h2>
                                    </div>

                                    <div class="col-lg-12 align-self-center">
                                        <fieldset>
                                            <input name="email" type="text" id="email" placeholder="YOUR EMAIL...">
                                            <small id="email-error" class="error-msg"></small>
                                        </fieldset>
                                    </div>

                                    <div class="col-lg-12 align-self-center">
                                        <fieldset>
                                            <input name="password" type="password" id="password"
                                                placeholder="YOUR PASSWORD..." required>
                                            <span id="password-error" class="error-msg"></span>
                                        </fieldset>
                                    </div>

                                    <div class="col-lg-12 align-self-center">
                                        <fieldset>
                                            <button type="submit" id="form-submit" class="button">LOG IN</button>
                                        </fieldset>
                                    </div>
                                </div>
                            </form>
                            <small class="have_account">
                                You Dont Have an Account? <a href="sign_in.html">SIGN IN</a>
                            </small>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </section>

    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script>
        
        document.addEventListener("DOMContentLoaded", function() {
            var loggedIn = sessionStorage.getItem('loggedIn');
            if (loggedIn) {
              window.location.href = 'index.html';
            }
          });
          
          document.getElementById('contact').addEventListener('submit', function(event) {
            var emailInput = document.getElementById('email');
            var passwordInput = document.getElementById('password');
          
            var emailError = document.getElementById('email-error');
            var passwordError = document.getElementById('password-error');
          
            emailError.textContent = '';
            passwordError.textContent = '';
          
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailInput.value)) {
              emailError.textContent = 'Please enter a valid email address.';
              emailInput.focus();
              event.preventDefault();
              return false;
            }
          
            if (passwordInput.value.trim() === '') {
              passwordError.textContent = 'Please enter your password.';
              passwordInput.focus();
              event.preventDefault();
              return false;
            }
          
            // Check if user information exists in local storage
            var storedUser = localStorage.getItem('user');
            if (storedUser) {
              var user = JSON.parse(storedUser);
          
              if (emailInput.value === user.email && passwordInput.value === user.password) {
                sessionStorage.setItem('loggedIn', JSON.stringify(user));
                window.location.href = 'index.html';
              } else {
                emailError.textContent = 'Invalid email or password.';
              }
            } else {
              emailError.textContent = 'User not found.';
            }
          });
          
    </script>

</body>

</html>